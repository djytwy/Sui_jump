{"version":3,"sources":["assets/scripts/ScoreOvertakeMgr.js"],"names":["cc","Class","Component","properties","scoreOvertakePrefab","type","Prefab","onLoad","scoreOvertakePool","NodePool","play","posWorld","playerArray","length","scoreOvertake","spawn","posLocal","node","convertToNodeSpaceAR","position","setPlayerInfo","scoreOvertakeNode","size","get","instantiate","addChild","getComponent","init","despawn","put"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAA,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAGLC,UAAU,EAAE;IACR;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACAC,mBAAmB,EAAE;MACjB,WAAS,IADQ;MAEjBC,IAAI,EAAEL,EAAE,CAACM;IAFQ;EAhBb,CAHP;EAyBLC,MAzBK,oBAyBK;IACN,KAAKC,iBAAL,GAAyB,IAAIR,EAAE,CAACS,QAAP,CAAgB,eAAhB,CAAzB;EACH,CA3BI;EA6BLC,IAAI,EAAE,cAASC,QAAT,EAAmBC,WAAnB,EAAgC;IAClC,IAAIA,WAAW,CAACC,MAAZ,GAAqB,CAAzB,EAA4B;MACxB,IAAIC,aAAa,GAAG,KAAKC,KAAL,EAApB;MACA,IAAIC,QAAQ,GAAG,KAAKC,IAAL,CAAUC,oBAAV,CAA+BP,QAA/B,CAAf;MACAG,aAAa,CAACG,IAAd,CAAmBE,QAAnB,GAA8BH,QAA9B;MACAF,aAAa,CAACM,aAAd,CAA4BR,WAAW,CAAC,CAAD,CAAvC;MACAE,aAAa,CAACJ,IAAd;IACH;EACJ,CArCI;EAuCLK,KAAK,EAAE,iBAAW;IACd,IAAIM,iBAAiB,GAAG,IAAxB;;IACA,IAAI,KAAKb,iBAAL,CAAuBc,IAAvB,KAAgC,CAApC,EAAuC;MACnCD,iBAAiB,GAAG,KAAKb,iBAAL,CAAuBe,GAAvB,EAApB;IACH,CAFD,MAEO;MACHF,iBAAiB,GAAGrB,EAAE,CAACwB,WAAH,CAAe,KAAKpB,mBAApB,CAApB;IACH;;IAED,KAAKa,IAAL,CAAUQ,QAAV,CAAmBJ,iBAAnB;IACA,IAAIP,aAAa,GAAGO,iBAAiB,CAACK,YAAlB,CAA+B,eAA/B,CAApB;IACAZ,aAAa,CAACa,IAAd,CAAmB,IAAnB;IAEA,OAAOb,aAAP;EACH,CApDI;EAsDLc,OAAO,EAAE,iBAASd,aAAT,EAAwB;IAC7B,KAAKN,iBAAL,CAAuBqB,GAAvB,CAA2Bf,aAAa,CAACG,IAAzC;EACH;AAxDI,CAAT","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n        scoreOvertakePrefab: {\n            default: null,\n            type: cc.Prefab,\n        },\n    },\n\n    onLoad () {\n        this.scoreOvertakePool = new cc.NodePool(\"scoreOvertake\");\n    },\n\n    play: function(posWorld, playerArray) {\n        if (playerArray.length > 0) {\n            let scoreOvertake = this.spawn();\n            let posLocal = this.node.convertToNodeSpaceAR(posWorld);\n            scoreOvertake.node.position = posLocal;\n            scoreOvertake.setPlayerInfo(playerArray[0]);\n            scoreOvertake.play();\n        }\n    },\n\n    spawn: function() {\n        let scoreOvertakeNode = null;\n        if (this.scoreOvertakePool.size() > 0) {\n            scoreOvertakeNode = this.scoreOvertakePool.get();\n        } else {\n            scoreOvertakeNode = cc.instantiate(this.scoreOvertakePrefab);\n        }\n\n        this.node.addChild(scoreOvertakeNode);\n        var scoreOvertake = scoreOvertakeNode.getComponent('ScoreOvertake');\n        scoreOvertake.init(this);\n\n        return scoreOvertake;\n    },\n\n    despawn: function(scoreOvertake) {\n        this.scoreOvertakePool.put(scoreOvertake.node);\n    },\n});\n"]}