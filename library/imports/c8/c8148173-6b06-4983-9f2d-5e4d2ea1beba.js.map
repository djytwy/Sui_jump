{"version":3,"sources":["assets/scripts/SkinItem.js"],"names":["screenSkinShop","require","SkinMgr","cc","Class","Component","properties","skin","type","Sprite","spriteChoose","spriteFrameChoose","SpriteFrame","spriteFrameUnchoose","labelInviteCount","Label","onLoad","node","on","onBtnClick","unlockCount","unlocked","start","init","skinSpriteFrame","choosed","spriteFrame","onChoose","instance","onBtnClickInvite","getSiblingIndex","onUnchoose","updateLockState","invitedCount","getInvitedCount","active","string"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAIA,cAAc,GAAGC,OAAO,CAAC,gBAAD,CAA5B;;AACA,IAAIC,OAAO,GAAGD,OAAO,CAAC,SAAD,CAArB;;AACAE,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAGLC,UAAU,EAAE;IACRC,IAAI,EAAE;MACF,WAAS,IADP;MAEFC,IAAI,EAAEL,EAAE,CAACM;IAFP,CADE;IAMRC,YAAY,EAAE;MACV,WAAS,IADC;MAEVF,IAAI,EAAEL,EAAE,CAACM;IAFC,CANN;IAWRE,iBAAiB,EAAE;MACf,WAAS,IADM;MAEfH,IAAI,EAAEL,EAAE,CAACS;IAFM,CAXX;IAgBRC,mBAAmB,EAAE;MACjB,WAAS,IADQ;MAEjBL,IAAI,EAAEL,EAAE,CAACS;IAFQ,CAhBb;IAqBRE,gBAAgB,EAAE;MACd,WAAS,IADK;MAEdN,IAAI,EAAEL,EAAE,CAACY;IAFK;EArBV,CAHP;EA8BL;EAEAC,MAhCK,oBAgCK;IACN,KAAKC,IAAL,CAAUC,EAAV,CAAa,OAAb,EAAsB,KAAKC,UAA3B,EAAuC,IAAvC;IACA,KAAKC,WAAL,GAAmB,CAAnB;IACA,KAAKC,QAAL,GAAgB,IAAhB;EACH,CApCI;EAsCLC,KAtCK,mBAsCI,CAER,CAxCI;EA0CL;EACAC,IAAI,EAAE,cAASC,eAAT,EAA0BC,OAA1B,EAAmCL,WAAnC,EAAgD;IAClD,KAAKb,IAAL,CAAUmB,WAAV,GAAwBF,eAAxB;IACA,KAAKd,YAAL,CAAkBgB,WAAlB,GAAgCD,OAAO,GAAG,KAAKd,iBAAR,GAA4B,KAAKE,mBAAxE;IACA,KAAKO,WAAL,GAAmBA,WAAnB;EACH,CA/CI;EAiDLD,UAAU,EAAE,sBAAW;IACnB,IAAI,KAAKE,QAAT,EAAmB;MACf,KAAKM,QAAL;IACH,CAFD,MAEO;MACH3B,cAAc,CAAC4B,QAAf,CAAwBC,gBAAxB;IACH;EACJ,CAvDI;EAyDLF,QAAQ,EAAE,oBAAW;IACjB,KAAKjB,YAAL,CAAkBgB,WAAlB,GAAgC,KAAKf,iBAArC;IACAX,cAAc,CAAC4B,QAAf,CAAwBD,QAAxB,CAAiC,KAAKV,IAAL,CAAUa,eAAV,EAAjC;EACH,CA5DI;EA8DLC,UAAU,EAAE,sBAAW;IACnB,KAAKrB,YAAL,CAAkBgB,WAAlB,GAAgC,KAAKb,mBAArC;EACH,CAhEI;EAkELmB,eAlEK,6BAkEa;IACd,IAAIC,YAAY,GAAG/B,OAAO,CAAC0B,QAAR,CAAiBM,eAAjB,EAAnB;;IAEA,IAAID,YAAY,IAAI,KAAKb,WAAzB,EAAsC;MAClC,KAAKC,QAAL,GAAgB,IAAhB;MACA,KAAKP,gBAAL,CAAsBG,IAAtB,CAA2BkB,MAA3B,GAAoC,KAApC;IACH,CAHD,MAGO;MACH,KAAKd,QAAL,GAAgB,KAAhB;MACA,KAAKP,gBAAL,CAAsBG,IAAtB,CAA2BkB,MAA3B,GAAoC,IAApC;MACA,KAAKrB,gBAAL,CAAsBsB,MAAtB,GAA+BH,YAAY,GAAG,GAAf,GAAqB,KAAKb,WAAzD;IACH;;IAED,OAAO,KAAKC,QAAZ;EACH;AA/EI,CAAT","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\nvar screenSkinShop = require('ScreenSkinShop');\nvar SkinMgr = require('SkinMgr');\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        skin: {\n            default: null,\n            type: cc.Sprite,\n        },\n\n        spriteChoose: {\n            default: null,\n            type: cc.Sprite,\n        },\n\n        spriteFrameChoose: {\n            default: null,\n            type: cc.SpriteFrame,\n        },\n\n        spriteFrameUnchoose: {\n            default: null,\n            type: cc.SpriteFrame,\n        },\n\n        labelInviteCount: {\n            default: null,\n            type: cc.Label,\n        },\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.node.on('click', this.onBtnClick, this);\n        this.unlockCount = 0;\n        this.unlocked = true;\n    },\n\n    start () {\n\n    },\n\n    // update (dt) {},\n    init: function(skinSpriteFrame, choosed, unlockCount) {\n        this.skin.spriteFrame = skinSpriteFrame;\n        this.spriteChoose.spriteFrame = choosed ? this.spriteFrameChoose : this.spriteFrameUnchoose;\n        this.unlockCount = unlockCount;\n    },\n\n    onBtnClick: function() {\n        if (this.unlocked) {\n            this.onChoose();\n        } else {\n            screenSkinShop.instance.onBtnClickInvite();\n        }\n    },\n\n    onChoose: function() {\n        this.spriteChoose.spriteFrame = this.spriteFrameChoose;\n        screenSkinShop.instance.onChoose(this.node.getSiblingIndex());\n    },\n\n    onUnchoose: function() {\n        this.spriteChoose.spriteFrame = this.spriteFrameUnchoose;\n    },\n\n    updateLockState() {\n        let invitedCount = SkinMgr.instance.getInvitedCount()\n\n        if (invitedCount >= this.unlockCount) {\n            this.unlocked = true;\n            this.labelInviteCount.node.active = false;\n        } else {\n            this.unlocked = false;\n            this.labelInviteCount.node.active = true;\n            this.labelInviteCount.string = invitedCount + \"/\" + this.unlockCount;\n        }\n\n        return this.unlocked;\n    },\n});\n"]}