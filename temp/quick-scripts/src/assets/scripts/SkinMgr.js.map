{"version":3,"sources":["assets/scripts/SkinMgr.js"],"names":["SkinMgr","cc","Class","Component","properties","skinSpriteFrames","type","SpriteFrame","statics","instance","onLoad","invitedCount","start","FBInstant","player","getStatsAsync","then","stats","console","log","JSON","stringify","bind","error","getSkinSpriteFrame","index","getSkinSpriteFrameCount","length","getInvitedCount","incrementInvitedCount","incrementStatsAsync"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIA,OAAO,GAAGC,EAAE,CAACC,KAAH,CAAS;EACnB,WAASD,EAAE,CAACE,SADO;EAGnBC,UAAU,EAAE;IACRC,gBAAgB,EAAE;MACd,WAAS,EADK;MAEdC,IAAI,EAAE,CAACL,EAAE,CAACM,WAAJ;IAFQ;EADV,CAHO;EAUnBC,OAAO,EAAE;IACLC,QAAQ,EAAE;EADL,CAVU;EAcnB;EAEAC,MAhBmB,oBAgBT;IACNV,OAAO,CAACS,QAAR,GAAmB,IAAnB;IACA,KAAKE,YAAL,GAAoB,CAApB;EACH,CAnBkB;EAqBnBC,KArBmB,mBAqBX;IACJ,IAAI,OAAOC,SAAP,IAAoB,WAAxB,EAAqC;MACjCA,SAAS,CAACC,MAAV,CAAiBC,aAAjB,CAA+B,CAAC,cAAD,CAA/B,EACCC,IADD,CACM,UAASC,KAAT,EAAgB;QAClB,KAAKN,YAAL,GAAoBM,KAAK,CAAC,cAAD,CAAzB;QACAC,OAAO,CAACC,GAAR,CAAY,4BAA4BC,IAAI,CAACC,SAAL,CAAeJ,KAAf,CAA5B,GAAoD,iBAApD,GAAwE,KAAKN,YAAzF;MACH,CAHK,CAGJW,IAHI,CAGC,IAHD,CADN,WAKO,UAASC,KAAT,EAAgB;QACnBL,OAAO,CAACC,GAAR,CAAY,0BAA0BC,IAAI,CAACC,SAAL,CAAeE,KAAf,CAAtC;MACH,CAPD;IAQH;EACJ,CAhCkB;EAkCnBC,kBAAkB,EAAE,4BAASC,KAAT,EAAgB;IAChC,OAAO,KAAKpB,gBAAL,CAAsBoB,KAAtB,CAAP;EACH,CApCkB;EAsCnBC,uBAAuB,EAAE,mCAAW;IAChC,OAAO,KAAKrB,gBAAL,CAAsBsB,MAA7B;EACH,CAxCkB;EA0CnBC,eA1CmB,6BA0CD;IACd,OAAO,KAAKjB,YAAZ;EACH,CA5CkB;EA8CnBkB,qBA9CmB,mCA8CK;IACpB,KAAKlB,YAAL,IAAqB,CAArB;;IAEA,IAAI,OAAOE,SAAP,IAAoB,WAAxB,EAAqC;MACjCA,SAAS,CAACC,MAAV,CACCgB,mBADD,CACqB;QACjBnB,YAAY,EAAE;MADG,CADrB,EAICK,IAJD,CAIM,UAASC,KAAT,EAAgB;QAClBC,OAAO,CAACC,GAAR,CAAY,kCAAkCC,IAAI,CAACC,SAAL,CAAeJ,KAAf,CAA9C;QACA,KAAKN,YAAL,GAAoBM,KAAK,CAAC,cAAD,CAAzB;MACH,CAHK,CAGJK,IAHI,CAGC,IAHD,CAJN,WAQO,UAASC,KAAT,EAAgB;QACnBL,OAAO,CAACC,GAAR,CAAY,gCAAgCC,IAAI,CAACC,SAAL,CAAeE,KAAf,CAA5C;MACH,CAVD;IAWH;EACJ;AA9DkB,CAAT,CAAd","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\nvar SkinMgr = cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        skinSpriteFrames: {\n            default: [],\n            type: [cc.SpriteFrame],\n        },\n    },\n\n    statics: {\n        instance: null,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        SkinMgr.instance = this;\n        this.invitedCount = 0;\n    },\n\n    start() {\n        if (typeof FBInstant != 'undefined') {\n            FBInstant.player.getStatsAsync(['invitedCount'])\n            .then(function(stats) {\n                this.invitedCount = stats['invitedCount'];\n                console.log(\"getStatsAsync success: \" + JSON.stringify(stats) + \" invitedCount: \" + this.invitedCount);\n            }.bind(this))\n            .catch(function(error) {\n                console.log(\"getStatsAsync error: \" + JSON.stringify(error));\n            });\n        }\n    },\n\n    getSkinSpriteFrame: function(index) {\n        return this.skinSpriteFrames[index];\n    },\n\n    getSkinSpriteFrameCount: function() {\n        return this.skinSpriteFrames.length;\n    },\n\n    getInvitedCount() {\n        return this.invitedCount;\n    },\n\n    incrementInvitedCount() {\n        this.invitedCount += 1;\n\n        if (typeof FBInstant != 'undefined') {\n            FBInstant.player\n            .incrementStatsAsync({\n                invitedCount: 1,\n            })\n            .then(function(stats) {\n                console.log(\"incrementStatsAsync success: \" + JSON.stringify(stats));\n                this.invitedCount = stats['invitedCount'];\n            }.bind(this))\n            .catch(function(error) {\n                console.log(\"incrementStatsAsync error: \" + JSON.stringify(error));\n            });\n        }\n    },\n});\n"]}