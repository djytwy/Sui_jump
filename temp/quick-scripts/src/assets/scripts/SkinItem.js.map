{"version":3,"sources":["assets/scripts/SkinItem.js"],"names":["screenSkinShop","require","SkinMgr","cc","Class","Component","properties","skin","type","Sprite","spriteChoose","spriteFrameChoose","SpriteFrame","spriteFrameUnchoose","labelInviteCount","Label","onLoad","node","on","onBtnClick","unlockCount","unlocked","start","init","skinSpriteFrame","choosed","spriteFrame","onChoose","instance","onBtnClickInvite","getSiblingIndex","onUnchoose","updateLockState","uploadCount","window","localStorage","getItem","parseInt","active","string"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAIA,cAAc,GAAGC,OAAO,CAAC,gBAAD,CAA5B;;AACA,IAAIC,OAAO,GAAGD,OAAO,CAAC,SAAD,CAArB;;AACAE,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAGLC,UAAU,EAAE;IACRC,IAAI,EAAE;MACF,WAAS,IADP;MAEFC,IAAI,EAAEL,EAAE,CAACM;IAFP,CADE;IAMRC,YAAY,EAAE;MACV,WAAS,IADC;MAEVF,IAAI,EAAEL,EAAE,CAACM;IAFC,CANN;IAWRE,iBAAiB,EAAE;MACf,WAAS,IADM;MAEfH,IAAI,EAAEL,EAAE,CAACS;IAFM,CAXX;IAgBRC,mBAAmB,EAAE;MACjB,WAAS,IADQ;MAEjBL,IAAI,EAAEL,EAAE,CAACS;IAFQ,CAhBb;IAqBRE,gBAAgB,EAAE;MACd,WAAS,IADK;MAEdN,IAAI,EAAEL,EAAE,CAACY;IAFK;EArBV,CAHP;EA8BL;EAEAC,MAhCK,oBAgCI;IACL,KAAKC,IAAL,CAAUC,EAAV,CAAa,OAAb,EAAsB,KAAKC,UAA3B,EAAuC,IAAvC;IACA,KAAKC,WAAL,GAAmB,CAAnB;IACA,KAAKC,QAAL,GAAgB,IAAhB;EACH,CApCI;EAsCLC,KAtCK,mBAsCG,CAEP,CAxCI;EA0CL;EACAC,IAAI,EAAE,cAAUC,eAAV,EAA2BC,OAA3B,EAAoCL,WAApC,EAAiD;IACnD,KAAKb,IAAL,CAAUmB,WAAV,GAAwBF,eAAxB;IACA,KAAKd,YAAL,CAAkBgB,WAAlB,GAAgCD,OAAO,GAAG,KAAKd,iBAAR,GAA4B,KAAKE,mBAAxE;IACA,KAAKO,WAAL,GAAmBA,WAAnB;EACH,CA/CI;EAiDLD,UAAU,EAAE,sBAAY;IACpB,IAAI,KAAKE,QAAT,EAAmB;MACf,KAAKM,QAAL;IACH,CAFD,MAEO;MACH3B,cAAc,CAAC4B,QAAf,CAAwBC,gBAAxB;IACH;EACJ,CAvDI;EAyDLF,QAAQ,EAAE,oBAAY;IAClB,KAAKjB,YAAL,CAAkBgB,WAAlB,GAAgC,KAAKf,iBAArC;IACAX,cAAc,CAAC4B,QAAf,CAAwBD,QAAxB,CAAiC,KAAKV,IAAL,CAAUa,eAAV,EAAjC;EACH,CA5DI;EA8DLC,UAAU,EAAE,sBAAY;IACpB,KAAKrB,YAAL,CAAkBgB,WAAlB,GAAgC,KAAKb,mBAArC;EACH,CAhEI;EAkELmB,eAlEK,6BAkEa;IACd;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IAEA,IAAIC,WAAW,GAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,WAA5B,IAA2CC,QAAQ,CAACH,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,WAA5B,CAAD,CAAnD,GAAgG,CAAlH;;IAEA,IAAIH,WAAW,IAAI,KAAKb,WAAxB,EAAqC;MACjC,KAAKC,QAAL,GAAgB,IAAhB;MACA,KAAKP,gBAAL,CAAsBG,IAAtB,CAA2BqB,MAA3B,GAAoC,KAApC;IACH,CAHD,MAGO;MACH,KAAKjB,QAAL,GAAgB,KAAhB;MACA,KAAKP,gBAAL,CAAsBG,IAAtB,CAA2BqB,MAA3B,GAAoC,IAApC;MACA,KAAKxB,gBAAL,CAAsByB,MAAtB,GAA+BN,WAAW,GAAG,GAAd,GAAoB,KAAKb,WAAxD;IACH;;IAED,OAAO,KAAKC,QAAZ;EACH;AA5FI,CAAT","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\nvar screenSkinShop = require('ScreenSkinShop');\nvar SkinMgr = require('SkinMgr');\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        skin: {\n            default: null,\n            type: cc.Sprite,\n        },\n\n        spriteChoose: {\n            default: null,\n            type: cc.Sprite,\n        },\n\n        spriteFrameChoose: {\n            default: null,\n            type: cc.SpriteFrame,\n        },\n\n        spriteFrameUnchoose: {\n            default: null,\n            type: cc.SpriteFrame,\n        },\n\n        labelInviteCount: {\n            default: null,\n            type: cc.Label,\n        },\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        this.node.on('click', this.onBtnClick, this);\n        this.unlockCount = 0;\n        this.unlocked = true;\n    },\n\n    start() {\n\n    },\n\n    // update (dt) {},\n    init: function (skinSpriteFrame, choosed, unlockCount) {\n        this.skin.spriteFrame = skinSpriteFrame;\n        this.spriteChoose.spriteFrame = choosed ? this.spriteFrameChoose : this.spriteFrameUnchoose;\n        this.unlockCount = unlockCount;\n    },\n\n    onBtnClick: function () {\n        if (this.unlocked) {\n            this.onChoose();\n        } else {\n            screenSkinShop.instance.onBtnClickInvite();\n        }\n    },\n\n    onChoose: function () {\n        this.spriteChoose.spriteFrame = this.spriteFrameChoose;\n        screenSkinShop.instance.onChoose(this.node.getSiblingIndex());\n    },\n\n    onUnchoose: function () {\n        this.spriteChoose.spriteFrame = this.spriteFrameUnchoose;\n    },\n\n    updateLockState() {\n        // let invitedCount = SkinMgr.instance.getInvitedCount()\n\n        // if (invitedCount >= this.unlockCount) {\n        //     this.unlocked = true;\n        //     this.labelInviteCount.node.active = false;\n        // } else {\n        //     this.unlocked = false;\n        //     this.labelInviteCount.node.active = true;\n        //     this.labelInviteCount.string = invitedCount + \"/\" + this.unlockCount;\n        // }\n\n        // return this.unlocked;\n\n        let uploadCount = window.localStorage.getItem(\"uploadNum\") ? parseInt(window.localStorage.getItem(\"uploadNum\")) : 0\n\n        if (uploadCount >= this.unlockCount) {\n            this.unlocked = true;\n            this.labelInviteCount.node.active = false;\n        } else {\n            this.unlocked = false;\n            this.labelInviteCount.node.active = true;\n            this.labelInviteCount.string = uploadCount + \"/\" + this.unlockCount;\n        }\n\n        return this.unlocked;\n    },\n});\n"]}