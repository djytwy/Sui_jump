{"version":3,"sources":["assets/scripts/ScoreFXMgr.js"],"names":["cc","Class","Component","properties","scoreFXPrefab","type","Prefab","onLoad","scoreFXPool","NodePool","playScoreFX","posWorld","score","scoreFX","spawnScoreFX","posLocal","node","convertToNodeSpaceAR","position","setScore","play","scoreFXNode","size","get","instantiate","addChild","getComponent","init","despawnScoreFX","put"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAA,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAGLC,UAAU,EAAE;IACRC,aAAa,EAAE;MACX,WAAS,IADE;MAEXC,IAAI,EAAEL,EAAE,CAACM;IAFE;EADP,CAHP;EAULC,MAVK,oBAUK;IACN,KAAKC,WAAL,GAAmB,IAAIR,EAAE,CAACS,QAAP,CAAgB,SAAhB,CAAnB;EACH,CAZI;EAcLC,WAAW,EAAE,qBAASC,QAAT,EAAmBC,KAAnB,EAA0B;IACnC,IAAIC,OAAO,GAAG,KAAKC,YAAL,EAAd;IACA,IAAIC,QAAQ,GAAG,KAAKC,IAAL,CAAUC,oBAAV,CAA+BN,QAA/B,CAAf;IACAE,OAAO,CAACG,IAAR,CAAaE,QAAb,GAAwBH,QAAxB;IACAF,OAAO,CAACM,QAAR,CAAiBP,KAAjB;IACAC,OAAO,CAACO,IAAR;EACH,CApBI;EAsBLN,YAAY,EAAE,wBAAW;IACrB,IAAIO,WAAW,GAAG,IAAlB;;IACA,IAAI,KAAKb,WAAL,CAAiBc,IAAjB,KAA0B,CAA9B,EAAiC;MAC7BD,WAAW,GAAG,KAAKb,WAAL,CAAiBe,GAAjB,EAAd;IACH,CAFD,MAEO;MACHF,WAAW,GAAGrB,EAAE,CAACwB,WAAH,CAAe,KAAKpB,aAApB,CAAd;IACH;;IAED,KAAKY,IAAL,CAAUS,QAAV,CAAmBJ,WAAnB;IACA,IAAIR,OAAO,GAAGQ,WAAW,CAACK,YAAZ,CAAyB,SAAzB,CAAd;IACAb,OAAO,CAACc,IAAR,CAAa,IAAb;IAEA,OAAOd,OAAP;EACH,CAnCI;EAqCLe,cAAc,EAAE,wBAASf,OAAT,EAAkB;IAC9B,KAAKL,WAAL,CAAiBqB,GAAjB,CAAqBhB,OAAO,CAACG,IAA7B;EACH;AAvCI,CAAT","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        scoreFXPrefab: {\n            default: null,\n            type: cc.Prefab,\n        },\n    },\n\n    onLoad () {\n        this.scoreFXPool = new cc.NodePool(\"scoreFX\");\n    },\n\n    playScoreFX: function(posWorld, score) {\n        let scoreFX = this.spawnScoreFX();\n        let posLocal = this.node.convertToNodeSpaceAR(posWorld);\n        scoreFX.node.position = posLocal;\n        scoreFX.setScore(score);\n        scoreFX.play();\n    },\n\n    spawnScoreFX: function() {\n        let scoreFXNode = null;\n        if (this.scoreFXPool.size() > 0) {\n            scoreFXNode = this.scoreFXPool.get();\n        } else {\n            scoreFXNode = cc.instantiate(this.scoreFXPrefab);\n        }\n\n        this.node.addChild(scoreFXNode);\n        var scoreFX = scoreFXNode.getComponent('ScoreFX');\n        scoreFX.init(this);\n\n        return scoreFX;\n    },\n\n    despawnScoreFX: function(scoreFX) {\n        this.scoreFXPool.put(scoreFX.node);\n    },\n});\n"]}